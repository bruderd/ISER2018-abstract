\section{Technical Approach}    \label{sec:technical-approach}
% Technical Approach

%% End effector forces are the superposition of individual FREE forces
A parallel combination consists of several FREEs arranged such that one end is attached to a common ground while the other is attached to a common end effector. In such an arrangement, the multidimensional spacial force at the end effector can be constructed by superimposing the forces generated by the individual actuators.

%% Modeling approach for individual FREE force and the fluid Jacobian
Our modeling approach for individual FREEs is based on the notion of a \emph{fluid Jacobian} $\bar{J}$, which maps the geometrical deformation of a soft actuator to a change in its volume. 
Under certain assumptions, the transpose of this Jacobian linearly maps the internal fluid pressure $p$ to the spatial forces generated by the fluid $\T_{\tx{fluid}}$, yielding the following expression for the net generalized spacial force generated by a single FREE $\T$ in terms of pressure,
\begin{align}
    \T &= \T_{\tx{fluid}} + \T_{\tx{elast}} = \J^T p + \T_{\tx{elast}} , 
\end{align}
where $\T_{\tx{elast}}$ is the component of force attributed to the deformation of the elastomer body cite(IROS).

%% Net end effector force
To calculate the net end effector force $\f$, the individual FREE forces are transformed into a common coordinate frame via the transformation matrix $\D_i$ and summed,
\begin{align}
    \f (\q, \p) &= \sum_{i=1}^n \D_i \T_i = \sum_{i=1}^n \D_i \left( \J_i^T p_i + \T_{\tx{elast}, i} \right),
\end{align}
where the vectors $\p$ and $\q$ contain the internal pressure and state values of all FREEs, respectively.
With the position and orientation of the end effector given by a state vector $\x$, and assuming that an inverse kinematics function allows the computation of the state $\q_i (\x)$ for each individual FREE, the force $\f$ can also be expressed in terms of the state of the end effector
\begin{align}
    \f (\x, \p) &= \J_x^T (\x) \p + \f_{\tx{elast}} \left( \q(\x) \right),
\end{align}
with the combined fluid Jacobian defined, $\J_x = \mtx{\D_1 \J_1^T & \D_2 \J_2^T \cdots & \D_n \J_n^T}^T$. 

%% Solving for equilibrium points
This expression enables us to determine the pressure required to actuate the system toward a desired equilibrium state, $\x_\tx{des}$, by solving the following equation for $\p$,
\begin{align}
    0 &= \f (\x_{\tx{des}}, \p) + \f_\tx{load} =  \J_x^T (\x_\tx{des}) \p + \f_{\tx{elast}} \left( \q(\x_\tx{des}) \right) + \f_\tx{load} , 
    \label{eq:pequation}
\end{align}
where $\f_\tx{load}$ is the force imposed by external loads.
Since \eqref{eq:pequation} is a linear equation of $\p$, it can be numerically solved efficiently using a linear least squares algorithm. This computation can be performed quickly enough to enable equilibrium position control of the end effector by iteratively solving \eqref{eq:pequation} in real time.














%% TEXT FROM IROS PAPER FOR REFERENCE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\subsection{Model of a Parallel Combination of FREEs}
%The net force generated by parallel combinations of FREEs at the end effector (mostly following conventions of the IROS paper)
%\begin{align}
%    \f(\q, \p) &= \sum_{i=1}^n \f_{i} = \sum_{i=1}^n \D_i \T_i \\
%    &= \sum_{i=1}^n \D_i \left( \J^T_{q, i} (\q_i) p_i + \C_{q, i} \q_i \right) \\
%    &= \sum_{i=1}^n \bar{J}^T_{x, i} (\vec{x}) p_i + \C_{x, i} \q_i(\x),
%\end{align}
%where $\J_{x, i} = \J_{q, i} \D_i^T$ is the fluid Jacobian of the $i$th FREE expressed in end effector coordinates and $\C_x = \D_i \C_{q, i}$ is the stiffness contribution of the the $i$th FREE on the stiffness of the end effector. 
%This can be written compactly in matrix notation as
%\begin{align}
%    \f (\x, \p) &= \J_x^T (\x) \p + \C_x \q(\x)
%\end{align}
%with the overall fluid Jacobian $\J_x$ and overall stiffness $\C_x$
%\begin{align}
%    \J_x &= \mtx{\J^T_{x, 1} & \J^T_{x, 2} & \cdots & \J^T_{x, n}}^T \\
%    \C_x &= \mtx{\C_{x,1} & \C_{x,2} & \cdots & \C_{x,n}}
%\end{align}
